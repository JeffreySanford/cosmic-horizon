# Release notes — v1.1.0 (candidate)

Release highlights
- Community Discoveries: converted prototype from in-memory → Postgres (TypeORM). Seeded dev data and added notification events (`community.discovery.created`). Back-end and front-end unit + e2e tests added.
- Event infrastructure: continued hardening of RabbitMQ/Kafka publishing paths and latency measurement tooling.
- Test & CI: fixed multiple flaky tests, added deterministic mocks, and improved E2E gating.

Notable fixes
- Replaced raw SQL fallback in CommunityService.getFeed() with TypeORM `find()` and added unit coverage.
- Added e2e assertion verifying RabbitMQ notification for discovery creates.
- Hardened mock behavior for shared `event-models` utilities in tests.

Upgrade & migration notes
- Run DB migrations before starting API in non-dev environments: `pnpm nx run cosmic-horizons-api:migrate` (or apply migration scripts as part of deployment).
- Dev `start:all` seeds example Community Discoveries for local exploration.

Known limitations
- Posting is unauthenticated in prototype/dev. Production will enable feature-flagged moderation and auth gating.

Files changed (high-level)
- `apps/cosmic-horizons-api`: CommunityService, Discovery entity, migration, tests
- `apps/cosmic-horizons-web`: Community feed components updated to use persisted API
- `apps/cosmic-horizons-api-e2e`: e2e tests extended to assert notifications
- Docs: `documentation/guides/COMMUNITY-DISCOVERIES.md`, `ROADMAP.md`, `TODO.md`, `documentation/backend/API-ROUTES.md`

How to validate locally
1. `pnpm start:all`
2. `GET /api/community/feed` → seeded rows present
3. `POST /api/community/posts` → returns 201 and produces a RabbitMQ notification (dev infra)
4. `pnpm nx test cosmic-horizons-api` and `pnpm nx e2e` → relevant tests pass
